# Default values for stereo-spot.
# Override with values-from-terraform.yaml (generated by Terraform) for queue URLs,
# bucket names, table names, and ECR repo URIs. See README.md.

# Global
global:
  # AWS region (used by workers and KEDA)
  awsRegion: us-east-1

# Image tags: use a single tag per release (e.g. git SHA). Terraform or CI updates
# values-from-terraform.yaml with actual ECR repo URIs; image.tag can be overridden there too.
image:
  tag: latest
  pullPolicy: IfNotPresent

# ECR repository URIs (without tag). Filled by Terraform in values-from-terraform.yaml.
# Placeholders for local helm template; must be set for real deploy.
images:
  webUi: ""
  mediaWorker: ""
  videoWorker: ""

# S3 and DynamoDB (from Terraform outputs). Leave empty for helm template only.
aws:
  inputBucketName: ""
  outputBucketName: ""
  jobsTableName: ""
  segmentCompletionsTableName: ""
  reassemblyTriggeredTableName: ""

# SQS queue URLs (from Terraform outputs)
queues:
  chunking: ""
  videoWorker: ""
  reassembly: ""

# Web UI
webUi:
  replicas: 1
  port: 8000
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"

# Media worker (KEDA-scaled on chunking + reassembly queues; one image for both)
mediaWorker:
  minReplicas: 0
  maxReplicas: 10
  chunkingQueueLength: "1"
  reassemblyQueueLength: "1"
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "2Gi"
      cpu: "2000m"

# Video worker (KEDA-scaled; GPU nodes via Karpenter in Step 4.4)
videoWorker:
  minReplicas: 0
  maxReplicas: 20
  queueLength: "1"
  resources:
    requests:
      memory: "2Gi"
      cpu: "500m"
      nvidia.com/gpu: "1"
    limits:
      memory: "8Gi"
      cpu: "4000m"
      nvidia.com/gpu: "1"

# Ingress for web-ui
ingress:
  enabled: true
  className: alb
  annotations: {}
  # host not required if using ALB with path-based or default backend
  host: ""
